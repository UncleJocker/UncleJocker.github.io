<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>MODIS水色数据处理教程 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="这个教程主要分为两部分：  应用python分析MODIS水色遥感数据 SeaDAS OCSSW的安装与应用  English version is coming soon.">
<meta property="og:type" content="article">
<meta property="og:title" content="MODIS水色数据处理教程">
<meta property="og:url" content="http://yoursite.com/2020/04/12/MODIS%E6%B0%B4%E8%89%B2%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%95%99%E7%A8%8B/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="这个教程主要分为两部分：  应用python分析MODIS水色遥感数据 SeaDAS OCSSW的安装与应用  English version is coming soon.">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-04-12T11:09:56.000Z">
<meta property="article:modified_time" content="2020-04-12T14:45:40.000Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Research">
<meta property="article:tag" content="Ocean Color">
<meta property="article:tag" content="Oceanography">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-MODIS水色数据处理教程" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/12/MODIS%E6%B0%B4%E8%89%B2%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%95%99%E7%A8%8B/" class="article-date">
  <time datetime="2020-04-12T11:09:56.000Z" itemprop="datePublished">2020-04-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      MODIS水色数据处理教程
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这个教程主要分为两部分：</p>
<ol>
<li>应用python分析MODIS水色遥感数据</li>
<li>SeaDAS OCSSW的安装与应用</li>
</ol>
<p>English version is coming soon.</p>
<a id="more"></a>

<h1 id="应用python分析MODIS水色遥感数据"><a href="#应用python分析MODIS水色遥感数据" class="headerlink" title="应用python分析MODIS水色遥感数据"></a>应用python分析MODIS水色遥感数据</h1><h2 id="程序包及工作环境"><a href="#程序包及工作环境" class="headerlink" title="程序包及工作环境"></a>程序包及工作环境</h2><p>如果这个步骤你花了很久才搞定的话，去用R吧，我朋友想跟我学python的都让我劝退学R了。</p>
<h3 id="Anaconda和-pycharm"><a href="#Anaconda和-pycharm" class="headerlink" title="Anaconda和 pycharm"></a>Anaconda和 pycharm</h3><p>Anaconda里涵盖了很多科学计算要用到的包，同时也给了一个很好用的包管理工具。下载地址<a target="_blank" rel="noopener" href="https://www.anaconda.com/%EF%BC%9B%E5%A6%82%E6%9E%9C%E5%9C%A8%E5%9B%BD%E5%86%85%E7%9A%84%E8%AF%9D%EF%BC%8C%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%E6%B8%85%E5%8D%8E%E9%95%9C%E5%83%8F%E8%BF%9B%E8%A1%8C%E4%B8%8B%E8%BD%BDhttps://mirror.tuna.tsinghua.edu.cn/help/anaconda/%EF%BC%8C%E7%84%B6%E5%90%8E%E5%86%8D%E6%9B%B4%E6%8D%A2%E4%B8%BA%E5%9B%BD%E5%86%85%E6%BA%90https://www.cnblogs.com/yikemogutou/p/11396045.html%E3%80%82">https://www.anaconda.com/；如果在国内的话，推荐使用清华镜像进行下载https://mirror.tuna.tsinghua.edu.cn/help/anaconda/，然后再更换为国内源https://www.cnblogs.com/yikemogutou/p/11396045.html。</a></p>
<p>下载完anaconda之后，打开anaconda navigator把Jupyter notebook(或者Jupyter lab)安装好，我个人通常会用这个用一张遥感数据进行程序的调试，然后在pycharm里改成批处理。</p>
<p>pycharm是一个编辑器，同时支持python,R和markdown。对于本菜鸡来说，这个编辑器可以很方便的打开Terminal和python console，添加TODO和利用git备份，最重要的是管理环境方便，不用每次都active啥啥啥。下载地址<a target="_blank" rel="noopener" href="https://www.jetbrains.com/pycharm/%E3%80%82">https://www.jetbrains.com/pycharm/。</a></p>
<h3 id="环境创建"><a href="#环境创建" class="headerlink" title="环境创建"></a>环境创建</h3><h4 id="地理信息数据分析环境"><a href="#地理信息数据分析环境" class="headerlink" title="地理信息数据分析环境"></a>地理信息数据分析环境</h4><p>打开pycharm，新建一个项目或者打开你之前的项目，然后preference-project interpreter-show all，右下角小加号添加一个python interpreter，选择Conda Environment，用你刚刚安装好的anaconda来创建一个新的环境。</p>
<p>结束之后回到编辑器界面，最下面有四个选项 TODO,Version Control,Terminal,Python Console。这四个东西和刚才那个project interpreter基本是我平时比较喜欢用pycharm的最主要原因了。在写程序时#TODO然后写上要做的事情，就可以在下面TODO页面里看到要做的东西;Version Control 可以提供本地或者github的版本控制，具体设置方法可以参考<a target="_blank" rel="noopener" href="https://www.jetbrains.com/help/pycharm/manage-projects-hosted-on-github.html%EF%BC%9BTerminal%E5%85%B6%E5%AE%9E%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AAbash%EF%BC%8C%E5%B9%B6%E4%B8%94%E6%98%AF%E5%9C%A8%E4%BD%A0%E5%88%9A%E6%89%8D%E5%88%9B%E5%BB%BA%E7%9A%84%E7%8E%AF%E5%A2%83%E9%87%8C%E9%9D%A2%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E5%8E%BB%E7%A1%AE%E8%AE%A4%E7%8E%AF%E5%A2%83%E5%95%A5%E7%9A%84%EF%BC%8C%E4%B9%9F%E4%B8%8D%E7%94%A8%E6%B7%BB%E5%8A%A0%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%EF%BC%8C%E5%B0%B1%E7%9B%B8%E5%BD%93%E4%BA%8E%E4%B8%80%E4%B8%AAanaconda">https://www.jetbrains.com/help/pycharm/manage-projects-hosted-on-github.html；Terminal其实就是一个bash，并且是在你刚才创建的环境里面，不需要去确认环境啥的，也不用添加全局变量，就相当于一个anaconda</a> prompt; python console就相当于一个命令行的python，在右上角绿色小三角附近点下拉菜单Edit configuration，然后选择run in python console，就可以在右边框里看到变量，比较适合我这种从matlab迁移过来的人。</p>
<p>先打开Terminal，依次运行</p>
<p><code>conda install -c conda-forge numpy h5py netcd4 opencv-python requests matplotlib pandas scipy scikit-learn</code></p>
<p><code>conda update -all</code></p>
<p>在这里一般不会出问题，-c conda-forge可以安装由大佬在开源社区里上传的程序包</p>
<p><code>conda install -c conda-forge pyresample</code></p>
<p>这里可能会遇到问题，这里有可能有两种问题，一个是C语言编译器的问题，下载安装Microsoft Visual Studio Community 2017然后再运行一下这句话就好了；另一种就是GDAL的问题。</p>
<p>GDAL(Geospatial Data Abstraction Library)是一个在X/MIT许可协议下的开源栅格空间数据转换库，可以参考大佬翻译的这份中文教程<a target="_blank" rel="noopener" href="https://www.osgeo.cn/python_gdal_utah_tutorial/index.html%E6%9D%A5%E5%AD%A6%E4%B9%A0%E4%B8%80%E4%B8%8B%E3%80%82%E4%B9%8B%E5%89%8D%E7%94%B5%E8%84%91%E4%B8%8A%E6%B2%A1%E6%9C%89%E5%AE%89%E8%A3%85%E8%BF%87python%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%9C%E8%A5%BF%E7%9A%84%E8%AF%9D%E4%B8%80%E8%88%AC%E4%B8%8D%E4%BC%9A%E9%81%87%E5%88%B0%E8%BF%99%E4%B8%AA%E9%97%AE%E9%A2%98%E3%80%82%E5%A6%82%E6%9E%9C%E4%BD%A0%E6%98%AF%E5%9C%A8windows%E5%B9%B3%E5%8F%B0%EF%BC%8C%E9%82%A3%E4%B9%88%E6%88%91%E6%8E%A8%E8%8D%90%E4%BD%A0%E6%9D%A5%E5%AE%89%E8%A3%85OSGeo4W%E6%9D%A5%E6%90%9E%E5%AE%9A%E8%BF%99%E4%B8%AA%E9%97%AE%E9%A2%98https://trac.osgeo.org/osgeo4w/%EF%BC%9B%E9%99%A4%E6%AD%A4%E4%B9%8B%E5%A4%96%EF%BC%8C%E8%BF%98%E6%9C%89%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%8C%E4%B8%80%E4%B8%AA%E6%98%AF%E4%BD%A0%E9%87%8D%E6%96%B0%E6%90%9E%E4%B8%AA%E7%8E%AF%E5%A2%83%EF%BC%8C%E4%B8%8D%E8%A6%81%E5%8A%A0%E5%85%A5%E4%B9%8B%E5%89%8D%E7%9A%84%E5%8C%85%E5%86%8D%E6%9D%A5%E5%AE%89%E8%A3%85%E4%B8%80%E6%AC%A1%EF%BC%8C%E5%8F%A6%E4%B8%80%E4%B8%AA%E6%98%AF%E4%B8%8B%E8%BD%BDwhl%E6%96%87%E4%BB%B6%E6%9D%A5%E5%AE%89%E8%A3%85%E3%80%82">https://www.osgeo.cn/python_gdal_utah_tutorial/index.html来学习一下。之前电脑上没有安装过python相关的东西的话一般不会遇到这个问题。如果你是在windows平台，那么我推荐你来安装OSGeo4W来搞定这个问题https://trac.osgeo.org/osgeo4w/；除此之外，还有两种方法，一个是你重新搞个环境，不要加入之前的包再来安装一次，另一个是下载whl文件来安装。</a></p>
<p>记得每次装完新的都来个conda update -all。</p>
<p>最后</p>
<p><code>conda install -c conda-forge basemap basemape-data-hires</code></p>
<p> <code>conda install -c conda-forge gdal</code></p>
<p><code>conda update -all</code></p>
<p>如果一切顺利，恭喜你完成了最麻烦的一步。</p>
<p>之后可以参照我之前写过的这篇文章里面的python包，<a target="_blank" rel="noopener" href="https://lifeodyssey.github.io/post/3aa0ed1a.html">https://lifeodyssey.github.io/post/3aa0ed1a.html</a> ,这些包都安装之后基本够用了。</p>
<p>其实环境这个问题可以用Docker来解决，之前有看到过这个大佬<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/108012664%E7%9A%84%E6%96%87%E7%AB%A0%EF%BC%8C%E6%88%91%E4%B9%9F%E8%BF%98%E5%9C%A8%E7%A0%94%E7%A9%B6%EF%BC%8C%E4%BA%89%E5%8F%96%E5%B0%BD%E5%BF%AB%E6%90%9E%E5%87%BA%E6%9D%A5%E4%B8%80%E4%B8%AA%E6%B0%B4%E8%89%B2%E4%BA%BA%E7%9A%84Docker%E3%80%82">https://zhuanlan.zhihu.com/p/108012664的文章，我也还在研究，争取尽快搞出来一个水色人的Docker。</a></p>
<h4 id="pycharm及Jupyter插件"><a href="#pycharm及Jupyter插件" class="headerlink" title="pycharm及Jupyter插件"></a>pycharm及Jupyter插件</h4><p>这个是属于个人喜好。</p>
<p>在pycharm-preference-plugins里可以安装插件，我安装了.*ignore,Dart,Kite和Material Theme UI，因为我有的时候还会用R，虽然R studio更好用，但是我也装了R Language for IntelliJ这个，来进行一些小的调试。</p>
<p>Jupyter个人一般只用来学习新的知识、调试和改bug，或者用来教别人的时候用，所以我这里用的还是Jupyter notebook,没有升级到Jupyterlab，安装教程可见<a target="_blank" rel="noopener" href="https://github.com/ipython-contrib/jupyter_contrib_nbextensions%E3%80%82">https://github.com/ipython-contrib/jupyter_contrib_nbextensions。</a></p>
<p>在Terminal里依次输入</p>
<p><code>conda install -c conda-forge jupyter_contrib_nbextensions</code></p>
<p><code>jupyter contrib nbextension install --user</code></p>
<p><code>conda update -all</code></p>
<p>然后在Terminal里输入</p>
<p><code>Jupyter notebook</code></p>
<p>就可以看到浏览器里蹦出来一个Jupyter notebook</p>
<p>点开Configurable nbextensions中勾选variable inspector，然后随便新建一个notebook，点开那个小瞄准镜就可以看到变量了。我平时没事就只用这个了。</p>
<h2 id="MODIS-数据读取、重投影及绘图"><a href="#MODIS-数据读取、重投影及绘图" class="headerlink" title="MODIS 数据读取、重投影及绘图"></a>MODIS 数据读取、重投影及绘图</h2><p>数据的下载可以参考<a target="_blank" rel="noopener" href="https://lifeodyssey.github.io/post/8636bca2.html">https://lifeodyssey.github.io/post/8636bca2.html</a></p>
<p>直接上我写的代码，造福千万家，但是希望你直接用的时候能够知其然也知其所以然。感谢实验室之前毕业的前辈给我提供的代码样本</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> netCDF4 <span class="keyword">as</span> nc4</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"><span class="keyword">from</span> geo_Collection <span class="keyword">import</span> geo_web <span class="keyword">as</span> gs</span><br><span class="line"><span class="keyword">from</span> QAAV6 <span class="keyword">import</span> QAAv6</span><br><span class="line">minlat = <span class="number">32.5</span></span><br><span class="line">minlon = <span class="number">130.5</span></span><br><span class="line">maxlat = <span class="number">35</span></span><br><span class="line">maxlon = <span class="number">136</span></span><br><span class="line"><span class="comment"># area of full seto-inland sea</span></span><br><span class="line">x = np.arange(minlon, maxlon, <span class="number">0.01</span>)  <span class="comment"># 1 km grid,</span></span><br><span class="line">y = np.arange(maxlat, minlat, <span class="number">-0.01</span>)</span><br><span class="line">nc_file = nc4.Dataset(filename, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">lon = nc_file.groups[<span class="string">&#x27;navigation_data&#x27;</span>].variables[<span class="string">&#x27;longitude&#x27;</span>][:]</span><br><span class="line">lat = nc_file.groups[<span class="string">&#x27;navigation_data&#x27;</span>].variables[<span class="string">&#x27;latitude&#x27;</span>][:]</span><br><span class="line">variables = nc_file.groups[<span class="string">&#x27;geophysical_data&#x27;</span>].variables</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> variables:</span><br><span class="line">    var = variables[i][:]</span><br><span class="line">    np.where(var &lt;= <span class="number">0</span>, var, np.nan)</span><br><span class="line">    <span class="keyword">if</span> i != <span class="string">&#x27;l2_flags&#x27;</span>:</span><br><span class="line">        var_re, grid = gs.swath_resampling(var, lon, lat, x, y, <span class="number">5000</span>)  <span class="comment"># 1 km grid</span></span><br><span class="line">        <span class="comment"># var_re=var_re.filled()</span></span><br><span class="line">        <span class="keyword">if</span> np.ma.is_mask(var_re):</span><br><span class="line">            var_re.mask=np.ma.nomask</span><br><span class="line">            var_re[var_re==<span class="number">-32767.0</span>]=np.nan</span><br><span class="line">         variables[i] = var_re</span><br><span class="line">     <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># var_re = var_re.filled()</span></span><br><span class="line">          variables[i] = var</span><br><span class="line">lons = grid.lons</span><br><span class="line">lats = grid.lats</span><br><span class="line"><span class="comment">#以叶绿素为例</span></span><br><span class="line">chl = variables[<span class="string">&#x27;chlor_a&#x27;</span>]</span><br><span class="line">plot_geo_image(chl, lon, lat, label=<span class="string">&#x27;CHL [mg/m$^3$]&#x27;</span>,</span><br><span class="line">               title=os.path.basename(file))</span><br><span class="line">ncfile.close()<span class="comment">#一定要记得这句</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>同时给出这里面用到的两个子函数和QAA的代码。</p>
<p>（QAA的代码还需要一些改进）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyresample</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.basemap <span class="keyword">import</span> Basemap</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> colors</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">from</span> scipy.interpolate <span class="keyword">import</span> RectSphereBivariateSpline</span><br><span class="line"><span class="keyword">from</span> matplotlib.colors <span class="keyword">import</span> LogNorm</span><br><span class="line"><span class="comment">#from  deco import *</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">swath_resampling</span>(<span class="params">src_data: np.ma.array, src_lon: np.array, src_lat: np.array,</span></span></span><br><span class="line"><span class="function"><span class="params">                     trg_lon: np.array, trg_lat: np.array, search_radius: float</span>):</span></span><br><span class="line">    <span class="keyword">if</span> len(trg_lon.shape) == <span class="number">1</span>:</span><br><span class="line">        grid_def = pyresample.geometry.SwathDefinition(*np.meshgrid(trg_lon, trg_lat))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        grid_def = pyresample.geometry.SwathDefinition(lons=trg_lon, lats=trg_lat)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#source grid with original swath data</span></span><br><span class="line">    <span class="comment"># if len(src_lon.shape) == 1:</span></span><br><span class="line">    <span class="comment">#     swath_def = pyresample.geometry.SwathDefinition(*np.meshgrid(src_lon, src_lat,sparse=True))</span></span><br><span class="line">    <span class="comment"># else:</span></span><br><span class="line">    <span class="comment">#     swath_def = pyresample.geometry.SwathDefinition(lons=src_lon, lats=src_lat)</span></span><br><span class="line"></span><br><span class="line">    swath_def = pyresample.geometry.SwathDefinition(lons=src_lon, lats=src_lat)</span><br><span class="line">    <span class="comment"># resample (here we use nearest. Bilinear, gaussian and custom defined methods are available)</span></span><br><span class="line">    <span class="comment"># for more, visit https://pyresample.readthedocs.io/en/latest/</span></span><br><span class="line">    result = pyresample.kd_tree.resample_nearest(swath_def, src_data, grid_def, epsilon=<span class="number">0.5</span>,</span><br><span class="line">                                                 fill_value=np.nan, radius_of_influence=search_radius)</span><br><span class="line">    <span class="keyword">return</span> result, grid_def</span><br><span class="line"></span><br><span class="line"><span class="comment">#@concurrent</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plot_geo_image</span>(<span class="params">sds: np.ma.array, lon: np.ndarray, lat: np.ndarray, log10: bool = True, title: str = None,</span></span></span><br><span class="line"><span class="function"><span class="params">                   label: str = None,</span></span></span><br><span class="line"><span class="function"><span class="params">                   caxis: list = None, lon_range: list = None, lat_range: list = None, save_image: str = None,</span></span></span><br><span class="line"><span class="function"><span class="params">                   dpi: int = <span class="number">400</span></span>):</span></span><br><span class="line">    <span class="keyword">if</span> len(lon.shape) == <span class="number">1</span>:</span><br><span class="line">        print(<span class="string">&#x27;MeshGridding...&#x27;</span>)</span><br><span class="line">        lon, lat = np.meshgrid(lon, lat)</span><br><span class="line"></span><br><span class="line">    lon_0 = (lon.min() + lon.max()) / <span class="number">2</span></span><br><span class="line">    lat_0 = (lat.min() + lat.max()) / <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    print(<span class="string">f&#x27;Lat: [<span class="subst">&#123;lat.min():<span class="number">.3</span>f&#125;</span>, <span class="subst">&#123;lat.max():<span class="number">.3</span>f&#125;</span>] | &#x27;</span></span><br><span class="line">          <span class="string">f&#x27;Lon: [<span class="subst">&#123;lon.min():<span class="number">.3</span>f&#125;</span>, <span class="subst">&#123;lon.max():<span class="number">.3</span>f&#125;</span>] | &#x27;</span></span><br><span class="line">          <span class="string">f&#x27;SDS: [<span class="subst">&#123;sds.min():<span class="number">.3</span>f&#125;</span>, <span class="subst">&#123;sds.max():<span class="number">.3</span>f&#125;</span>]&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (lon_range <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>) <span class="keyword">and</span> (lat_range <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>):</span><br><span class="line">        m = Basemap(llcrnrlon=min(lon_range), llcrnrlat=min(lat_range),</span><br><span class="line">                    urcrnrlon=max(lon_range), urcrnrlat=max(lat_range),</span><br><span class="line">                    resolution=<span class="string">&#x27;f&#x27;</span>, lon_0=lon_0, lat_0=lat_0, projection=<span class="string">&#x27;tmerc&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        m = Basemap(llcrnrlon=lon.min(), llcrnrlat=lat.min(),</span><br><span class="line">                    urcrnrlon=lon.max(), urcrnrlat=lat.max(),</span><br><span class="line">                    resolution=<span class="string">&#x27;f&#x27;</span>, lon_0=lon_0, lat_0=lat_0, projection=<span class="string">&#x27;tmerc&#x27;</span>)</span><br><span class="line">    x2d, y2d = m(lon, lat)</span><br><span class="line"></span><br><span class="line">    fig = plt.figure(figsize=(<span class="number">8</span>, <span class="number">8</span> * m.aspect))</span><br><span class="line">    ax = fig.add_axes([<span class="number">0.08</span>, <span class="number">0.1</span>, <span class="number">0.7</span>, <span class="number">0.7</span>], facecolor=<span class="string">&#x27;white&#x27;</span>)</span><br><span class="line">    <span class="comment"># changed to facecolor 8 October 2019</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (lon_range <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>) <span class="keyword">and</span> (lat_range <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>):</span><br><span class="line">        parallels = np.arange(min(lat_range), max(lat_range), <span class="number">3</span>)</span><br><span class="line">        meridians = np.arange(min(lon_range), max(lon_range), <span class="number">4</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        parallels = meridians = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> caxis <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        cmn, cmx = min(caxis), max(caxis)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        cmn, cmx = sds.min(), sds.max()</span><br><span class="line">    <span class="comment"># m.drawparallels(parallels, fontsize=10, linewidth=0.25, dashes=[7, 15],</span></span><br><span class="line">    <span class="comment">#                  color=&#x27;k&#x27;, labels=[1, 0, 1, 1])</span></span><br><span class="line">    <span class="comment"># m.drawmeridians(meridians, fontsize=10, dashes=[7, 15],</span></span><br><span class="line">    <span class="comment">#                  linewidth=0.3, color=&#x27;k&#x27;, labels=[1, 1, 0, 1])</span></span><br><span class="line">    <span class="comment">#ncl = 150</span></span><br><span class="line">    <span class="comment">#if log10 is True:</span></span><br><span class="line">    <span class="comment">#    norm = colors.LogNorm(vmin=cmn, vmax=cmx)</span></span><br><span class="line">    <span class="comment">#else:</span></span><br><span class="line">     <span class="comment">#   bounds = np.linspace(cmn, cmx, ncl)</span></span><br><span class="line">     <span class="comment">#   norm = colors.BoundaryNorm(boundaries=bounds, ncolors=ncl)</span></span><br><span class="line"></span><br><span class="line">    p = m.pcolor(x2d, y2d, sds, vmin=cmn,vmax=cmx, cmap=<span class="string">&#x27;jet&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> title <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        plt.title(title)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># divider = make_axes_locatable(ax)</span></span><br><span class="line">    <span class="comment"># cax = divider.append_axes(&#x27;vertical&#x27;, size=&quot;3%&quot;, pad=0.05)</span></span><br><span class="line">    <span class="comment">#cax = plt.axes([cmn, 0, cmx])  # setup colorbar axes</span></span><br><span class="line"></span><br><span class="line">    cb = m.colorbar(p,location=<span class="string">&quot;right&quot;</span>,size=<span class="string">&quot;5%&quot;</span>,pad=<span class="number">0.1</span>)  <span class="comment"># draw colorbar</span></span><br><span class="line">    <span class="comment">#if label is not None:</span></span><br><span class="line">    <span class="comment"># cb.set_label(&quot;%s&quot; % label)</span></span><br><span class="line">    <span class="comment"># plt.sca(ax)  # make the original axes current again</span></span><br><span class="line">    <span class="comment"># plt.clim(cmn, cmx)</span></span><br><span class="line">    <span class="comment">#unit=&#x27;Elevation to the sea level&#x27;</span></span><br><span class="line">    <span class="comment">#cb.set_label(unit, rotation=270, labelpad=10.0, fontsize=10)</span></span><br><span class="line">    cb.ax.tick_params(labelsize=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    m.drawcoastlines()</span><br><span class="line">    m.drawcountries()</span><br><span class="line">    m.fillcontinents()</span><br><span class="line">    <span class="comment">#plt.show()</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> save_image <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        plt.savefig(save_image, dpi=dpi, facecolor=<span class="string">&#x27;w&#x27;</span>, edgecolor=<span class="string">&#x27;w&#x27;</span>, orientation=<span class="string">&#x27;portrait&#x27;</span>)</span><br><span class="line">        plt.show()</span><br><span class="line">        plt.close()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">creategrid</span>(<span class="params">min_lon, max_lon, min_lat, max_lat, cell_size_deg, mesh=False</span>):</span></span><br><span class="line"><span class="comment">#Output grid within geobounds and specifice cell size</span></span><br><span class="line"><span class="comment">#cell_size_deg should be in decimal degrees’’’</span></span><br><span class="line"></span><br><span class="line">    min_lon = math.floor(min_lon)</span><br><span class="line">    max_lon = math.ceil(max_lon)</span><br><span class="line">    min_lat = math.floor(min_lat)</span><br><span class="line">    max_lat = math.ceil(max_lat)</span><br><span class="line">    lon_num = (max_lon - min_lon)/cell_size_deg</span><br><span class="line">    lat_num = (max_lat - min_lat)/cell_size_deg</span><br><span class="line">    grid_lons = np.zeros(lon_num) <span class="comment"># fill with lon_min</span></span><br><span class="line">    grid_lats = np.zeros(lat_num) <span class="comment"># fill with lon_max</span></span><br><span class="line">    grid_lons = grid_lons + (np.assary(range(lon_num))*cell_size_deg)</span><br><span class="line">    grid_lats = grid_lats + (np.assary(range(lat_num))*cell_size_deg)</span><br><span class="line">    grid_lons, grid_lats = np.meshgrid(grid_lons, grid_lats)</span><br><span class="line">    grid_lons = np.ravel(grid_lons)</span><br><span class="line">    grid_lats = np.ravel(grid_lats)</span><br><span class="line">    <span class="comment">#if mesh = True:</span></span><br><span class="line">    <span class="comment"># grid_lons = grid_lons</span></span><br><span class="line">    <span class="comment"># grid_lats = grid_lats</span></span><br><span class="line">    <span class="keyword">return</span> grid_lons, grid_lats</span><br></pre></td></tr></table></figure>

<p>QAAv6</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.interpolate <span class="keyword">import</span> Akima1DInterpolator <span class="keyword">as</span> Akima</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> deco <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> math <span class="keyword">as</span> m</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># wavelengths = &#123;</span></span><br><span class="line"><span class="comment">#     &#x27;OLI&#x27;   : [442.98, 482.49, 561.33, 654.61],</span></span><br><span class="line"><span class="comment">#     &#x27;MSI&#x27;   : [443.93, 496.54, 560.01, 664.45],</span></span><br><span class="line"><span class="comment">#     &#x27;OLCI&#x27;  : [411.3999939, 442.63000488, 490.07998657, 510.07000732, 560.05999756, 619.97998047, 664.85998535, 673.61999512, 681.15002441], # 9 band insitu</span></span><br><span class="line"><span class="comment">#     &#x27;OLCI2&#x27; : [400, 412.5, 442.5, 490, 510, 560, 620, 665, 673.75, 681.25, 708.75, 753.75, 761.25, 764.375, 767.5, 778.75], # 16 band LUT</span></span><br><span class="line"><span class="comment">#     &#x27;VI&#x27;    : [412.49, 444.17, 486.81, 549.99, 670.01],</span></span><br><span class="line"><span class="comment">#     &#x27;AER&#x27;   : [412, 442, 490, 530, 551, 668],</span></span><br><span class="line"><span class="comment">#     &#x27;MOSIA&#x27; : [412, 443, 469,488,531,547,555,645,667,678],</span></span><br><span class="line"><span class="comment">#     &#x27;GOCI&#x27;  : [412, 443, 490, 555, 660, 680],</span></span><br><span class="line"><span class="comment">#     &#x27;SGLI&#x27;  : [380,412,443,490,530,565,673.5]</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"><span class="comment">#@concurrent</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">QAAv6</span>(<span class="params">Rrs</span>):</span></span><br><span class="line">    <span class="comment">#acording to Lee,QAAv6</span></span><br><span class="line">    <span class="comment">#write by Zhou,20191130</span></span><br><span class="line">    <span class="comment">#Input data need to be an arrary that contain 10 bands Rrs of MODIS,from short wavelength to long wavelength in a certain station</span></span><br><span class="line">    <span class="comment">#Output is a tuple, first array is aph,second array is bbp</span></span><br><span class="line">    <span class="comment">#use as import QAAV6</span></span><br><span class="line"><span class="comment"># B1: 412 nm 0</span></span><br><span class="line"><span class="comment"># B2: 443 nm 1</span></span><br><span class="line"><span class="comment"># B3: 469 nm 2</span></span><br><span class="line"><span class="comment"># B4: 488 nm 3</span></span><br><span class="line"><span class="comment"># B5: 531 nm 4</span></span><br><span class="line"><span class="comment"># B6: 547 nm 5</span></span><br><span class="line"><span class="comment"># B7: 555 nm 6</span></span><br><span class="line"><span class="comment"># B8: 645 nm 7</span></span><br><span class="line"><span class="comment"># B9: 667 nm 8</span></span><br><span class="line"><span class="comment"># B10: 678 nm 9</span></span><br><span class="line"></span><br><span class="line">    Lambda=np.array([<span class="number">412</span>, <span class="number">443</span>, <span class="number">469</span>,<span class="number">488</span>,<span class="number">531</span>,<span class="number">547</span>,<span class="number">555</span>,<span class="number">645</span>,<span class="number">667</span>,<span class="number">678</span>])</span><br><span class="line">    nbands=np.shape(Lambda)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    IOPw=np.array([[<span class="number">0.003344468</span>,<span class="number">0.004572564</span>],</span><br><span class="line">    [<span class="number">0.00244466</span>,<span class="number">0.00635</span>],</span><br><span class="line">    [<span class="number">0.001910803</span>,<span class="number">0.010483637</span>],</span><br><span class="line">    [<span class="number">0.001609567</span>,<span class="number">0.014361745</span>],</span><br><span class="line">    [<span class="number">0.00111757</span>,<span class="number">0.043747657</span>],</span><br><span class="line">    [<span class="number">0.000983055</span>,<span class="number">0.053262848</span>],</span><br><span class="line">    [<span class="number">0.000923288</span>,<span class="number">0.0595</span>],</span><br><span class="line">    [<span class="number">0.000482375</span>,<span class="number">0.325</span>],</span><br><span class="line">    [<span class="number">0.00041731</span>,<span class="number">0.433497423</span>],</span><br><span class="line">    [<span class="number">0.00038884</span>,<span class="number">0.457440162</span>]])</span><br><span class="line"></span><br><span class="line">    <span class="comment">#     if(Rrs=np.nan):</span></span><br><span class="line">    <span class="comment">#     return np.nan</span></span><br><span class="line">    <span class="comment"># else:</span></span><br><span class="line">    <span class="comment"># bbw from Morel (1974).aw  from Pope and Fry (1997)</span></span><br><span class="line">    bbp = np.ones(<span class="number">10</span>)</span><br><span class="line">    adg = np.ones(<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">if</span>(np.nan <span class="keyword">in</span> Rrs):</span><br><span class="line">        bbp[:]=np.nan</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        bw=IOPw[:,<span class="number">0</span>]<span class="comment">#backscaterring of pure water</span></span><br><span class="line">        aw=IOPw[:,<span class="number">1</span>]<span class="comment">#absorption of pure water</span></span><br><span class="line">        rrs = Rrs / (<span class="number">0.52</span> + <span class="number">1.7</span> * Rrs)</span><br><span class="line">        g0 = <span class="number">0.089</span></span><br><span class="line">        g1 = <span class="number">0.1245</span></span><br><span class="line">        u = (-g0 + ((g0 ** <span class="number">2</span>) + <span class="number">4</span> * g1 * rrs) ** <span class="number">0.5</span>) / (<span class="number">2</span> * g1)</span><br><span class="line"></span><br><span class="line">        aph = np.ones(<span class="number">10</span>)<span class="comment">#adg is the absorption of CDOM and NAP</span></span><br><span class="line">        <span class="keyword">if</span> Rrs[<span class="number">6</span>]&lt;<span class="number">0.0015</span>:<span class="comment">#select 555 as reference</span></span><br><span class="line">            r=<span class="number">550</span></span><br><span class="line">            p1=(rrs[<span class="number">1</span>] + rrs[<span class="number">3</span>])</span><br><span class="line">            p2 = rrs[<span class="number">6</span>] + <span class="number">5</span> * (((rrs[<span class="number">8</span>]) ** <span class="number">2</span>)) / (rrs[<span class="number">3</span>])</span><br><span class="line">            x = np.log10(p1 / p2)</span><br><span class="line">            ar = aw[<span class="number">6</span>] + np.power(<span class="number">10</span>, (<span class="number">-1.146</span> - <span class="number">1.366</span> * x - <span class="number">0.469</span> * (x ** <span class="number">2</span>)))<span class="comment"># step 2</span></span><br><span class="line">            bbpr=((u[<span class="number">6</span>]*ar)/(<span class="number">1</span>-u[<span class="number">6</span>]))-bw[<span class="number">6</span>]<span class="comment">#step3</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            r=<span class="number">670</span></span><br><span class="line">            p1 = Rrs[<span class="number">8</span>] / (Rrs[<span class="number">1</span>] + Rrs[<span class="number">3</span>])</span><br><span class="line">            p2 = <span class="number">0.39</span> * (p1 ** <span class="number">1.14</span>)</span><br><span class="line">            ar = (aw[<span class="number">8</span>]) + p2  <span class="comment"># step2</span></span><br><span class="line">            bbpr = (u[<span class="number">8</span>] * ar / (<span class="number">1</span> - (u[<span class="number">8</span>])) - (bw[<span class="number">8</span>]))  <span class="comment"># step3</span></span><br><span class="line">        eta=<span class="number">2</span>*(<span class="number">1</span><span class="number">-1.2</span>*np.exp(<span class="number">-0.9</span>*(rrs[<span class="number">1</span>]/rrs[<span class="number">6</span>]))) <span class="comment">#step4</span></span><br><span class="line"></span><br><span class="line">        zeta = <span class="number">0.74</span> + <span class="number">0.2</span> / (<span class="number">0.8</span> + rrs[<span class="number">1</span>] / rrs[<span class="number">6</span>])<span class="comment">#step 7&amp;8</span></span><br><span class="line">        S = <span class="number">0.015</span> + <span class="number">0.002</span> / (<span class="number">0.6</span> + rrs[<span class="number">1</span>] / rrs[<span class="number">6</span>])</span><br><span class="line">        xi = np.exp(S * (<span class="number">442.5</span> - <span class="number">415.5</span>))</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(nbands):</span><br><span class="line">            bbp[i]= bbpr * np.power(r/Lambda[i], eta)<span class="comment">#step5</span></span><br><span class="line">        a = ((<span class="number">1</span> - u) * (bw + bbp)) / u<span class="comment">#step6</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(nbands):</span><br><span class="line"></span><br><span class="line">            ag443=((a[<span class="number">0</span>]-zeta*a[<span class="number">1</span>])/(xi-zeta))-((aw[<span class="number">0</span>]-zeta*aw[<span class="number">1</span>])/(xi-zeta))</span><br><span class="line">            adg[i]=ag443*np.exp(-S*(Lambda[i]<span class="number">-443</span>))</span><br><span class="line">            aph[i]=a[i]-adg[i]-aw[i]</span><br><span class="line">        <span class="keyword">return</span> bbp,a</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>QAA的代码还需要很多的改进，目前正在参考<a target="_blank" rel="noopener" href="https://github.com/BrandonSmithJ/band-adjustment%E8%BF%9B%E8%A1%8C%E6%94%B9%E8%BF%9B%EF%BC%8C%E6%AC%A2%E8%BF%8E%E5%90%8C%E8%A1%8C%E4%BA%A4%E6%B5%81%E3%80%82">https://github.com/BrandonSmithJ/band-adjustment进行改进，欢迎同行交流。</a></p>
<h2 id="程序加速"><a href="#程序加速" class="headerlink" title="程序加速"></a>程序加速</h2><p>因为python自己的问题，如果你要处理大量遥感图像的话会很慢，这个一方面是matplotlib自己出图慢，另一方面是因为没有充分利用多核cpu。</p>
<p>批量出图可以参考<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1584962">https://cloud.tencent.com/developer/article/1584962</a> 这篇文章。</p>
<p>解决多核cpu最好用的方法是并行。</p>
<p>像上面那个程序，用并行来加速的话可以这么写：</p>
<ol>
<li>把它改写成一个函数，一般是把文件名作为输入，或者是文件在datalist之中的顺序，我用的是后面这种。</li>
<li>a1=np.arange(len(datalist))，创建一个list，并行的时候传入的变量只能是list</li>
<li>将代码改写成如下样子</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing <span class="keyword">as</span> mp</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>()</span></span><br><span class="line"><span class="function">#这里是你刚才改写的程序</span></span><br><span class="line">pool=mp.Pool(processes=7)#电脑8核，给自己空余了一个核用来处理其他任务</span><br><span class="line">pool.map(main,a1)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>可以先不做并行查看内存占用情况，如果有很多内存没用的话，开了并行一般都会提速，我的程序需要处理140张卫星图像，缩短到原来的1/3左右。</p>
<h1 id="SeaDAS-OCSSW的安装与应用"><a href="#SeaDAS-OCSSW的安装与应用" class="headerlink" title="SeaDAS OCSSW的安装与应用"></a>SeaDAS OCSSW的安装与应用</h1><p>SeaDAS是NASA出品的一个水色遥感处理软件，其中的OCSSW更是内置了很多美国发射的卫星的标准处理流程算法（欧洲的那几个用的SNAP，韩国的GOCI用的GDPS，日本的SGLI，也许哪天我用OLCI数据的时候会把SNAP的教程搞一下），我主要是用他的l2gen这个功能。OCSSW只能在Linux或者Mac OS系统下安装。下载地址<a target="_blank" rel="noopener" href="https://seadas.gsfc.nasa.gov/%EF%BC%8C%E8%BF%99%E9%87%8C%E8%AE%B2Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%EF%BC%8C%E6%88%91%E7%94%A8%E7%9A%84%E6%98%AFUbuntu">https://seadas.gsfc.nasa.gov/，这里讲Linux系统下的安装方法，我用的是Ubuntu</a> 18.04LTS.</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>如果你像我一样肉身翻墙的话，那恭喜你真的是非常方便了。</p>
<h3 id="SeaDAS-安装"><a href="#SeaDAS-安装" class="headerlink" title="SeaDAS 安装"></a>SeaDAS 安装</h3><p>NASA官方的tutorial在<a target="_blank" rel="noopener" href="https://seadas.gsfc.nasa.gov/tutorials/installation_tutorial/">https://seadas.gsfc.nasa.gov/tutorials/installation_tutorial/</a></p>
<p>基本按照这个来就可以了，除了Java版本，我第一次装的时候用的是最新版Java，结果SeaDAS无法作为一个独立程序运行（就是在程序页面里找不到这个程序的图标？启动器？本Ubuntu菜鸡虚心求教），最后按照如下方法安装了Java8:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:ts.sch.gr/ppa </span><br><span class="line">sudo apt-get update </span><br><span class="line">sudo apt-get install oracle-java8-installer</span><br></pre></td></tr></table></figure>

<h3 id="OCSSW安装"><a href="#OCSSW安装" class="headerlink" title="OCSSW安装"></a>OCSSW安装</h3><h4 id="Python环境设置"><a href="#Python环境设置" class="headerlink" title="Python环境设置"></a>Python环境设置</h4><p>我们一般现在用来干活的python一般都是3版本的，但是Ubuntu系统内置的python是2版本，SeaDAS OCSSW会使用默认的内置版本，所以在这里需要搞定一些程序库的问题（如果没搞好的话后面一般会显示你没有requests这个包）。</p>
<p>这时候就用到我刚才安装的Pycharm来手动管理了，打开pycharm-preference-Project Interpreter,如果你没有装别的东西的话，你的电脑里应该就只有几个python的解释器，你刚才通过anacoonda安装的是3版本，在Add Python Interpreter里面，系统自带的解释器一般会在Pipenv、System或者Virtualenv这里找到，通过路径判断出来哪个是系统自带的，创建一个新环境，然后在Terminal里安装requests这个包就可以了</p>
<h4 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h4><p>完成这一步之后，如果你肉身翻墙或者依靠金钱的力量翻墙的话，就可以在GUI里面手动点选安装了；如果在国内，可以按照刚才放的官方的页面，把每个Bundle都下载下来离线安装。</p>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><p>我这里主要用的是l2gen这个函数，这里放一个在seadas forum找到然后自己修改的脚本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># source /Users/zhenjia/.bash_profile </span></span><br><span class="line"><span class="comment">#先运行上面这个文件来搞定全局变量</span></span><br><span class="line"><span class="comment">#Example script to process L1A files up to L2, put in same directory as </span></span><br><span class="line"><span class="comment"># your L1A files</span></span><br><span class="line"><span class="comment"># Run script by typing on Terminal Command Line: </span></span><br><span class="line"><span class="comment"># bash l1a_to_l2.sh input.txt</span></span><br><span class="line"><span class="comment"># input.txt contains list of files [ create by: ls -1 *L1A_LAC* &gt; input.txt ]</span></span><br><span class="line"></span><br><span class="line">LIST=<span class="variable">$1</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$LIST</span>&quot;</span> ]</span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;No input file list supplied&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ ! -a <span class="variable">$LIST</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$LIST</span> does not exist!&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">mkdir -p <span class="keyword">done</span></span><br><span class="line">mkdir -p l2_lac</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> FILE <span class="keyword">in</span> $(cat <span class="variable">$LIST</span>);</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Working on <span class="variable">$FILE</span>&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;FILE&#125;</span></span><br><span class="line">    <span class="comment"># get file basename (no file extension)</span></span><br><span class="line">    BASE=`basename <span class="variable">$FILE</span> .L1A_LAC.x.hdf`</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;BASE&#125;</span></span><br><span class="line">    GEOFILE=<span class="variable">$&#123;BASE&#125;</span>.GEO</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;GEOFILE&#125;</span></span><br><span class="line">    L1BFILE=<span class="variable">$&#123;BASE&#125;</span>.L1B_LAC.x.hdf</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;L1BFILE&#125;</span></span><br><span class="line">    L2FILE=<span class="variable">$&#123;BASE&#125;</span>.L2_LAC.x.hdf</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;L2FILE&#125;</span></span><br><span class="line">    ancfile=<span class="variable">$&#123;BASE&#125;</span>.L1A_LAC.x.hdf.anc</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Creating GEOFILE <span class="variable">$GEOFILE</span>&quot;</span></span><br><span class="line">    modis_GEO.py -v <span class="variable">$FILE</span> -o <span class="variable">$GEOFILE</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Creating L1B file&quot;</span></span><br><span class="line">    modis_L1B.py -v <span class="variable">$FILE</span> <span class="variable">$GEOFILE</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Creating anc file&quot;</span></span><br><span class="line">    getanc.py -v <span class="variable">$FILE</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Create L2 file&quot;</span></span><br><span class="line">    l2gen ifile=<span class="variable">$L1BFILE</span> geofile=<span class="variable">$GEOFILE</span> ofile=<span class="variable">$L2FILE</span> par=<span class="variable">$ancfile</span> l2prod=<span class="string">&quot;Kd_490 Rrs_nnn angstrom aot_869 chlor_a ipar nLw_nnn nflh par pic poc rhos_nnn&quot;</span> aer_opt=-2</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Cleaning up&quot;</span></span><br><span class="line">    rm -v <span class="variable">$&#123;BASE&#125;</span>.L1B* <span class="variable">$GEOFILE</span> <span class="variable">$ancfile</span></span><br><span class="line">    <span class="comment">#mv -v $FILE done/</span></span><br><span class="line">    mv -v <span class="variable">$L2FILE</span> l2_lac/</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/04/12/MODIS%E6%B0%B4%E8%89%B2%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E6%95%99%E7%A8%8B/" data-id="ckdn7xpsm005u6kyycqqr5hti" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ocean-Color/" rel="tag">Ocean Color</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Oceanography/" rel="tag">Oceanography</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Research/" rel="tag">Research</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/05/18/book-reading-note3/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          book-reading-note3
        
      </div>
    </a>
  
  
    <a href="/2020/04/12/Tutorial-for-handling-MODIS-ocean-color-data/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Tutorial for handling MODIS ocean color data</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Papers-And-Thesis/">Papers And Thesis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%BB%8F%E9%AA%8C/">学习经验</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%95%99%E5%AD%A6%E7%94%9F%E6%B4%BB/">留学生活</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B5%84%E6%96%99%E8%B4%B4%E6%95%B4%E7%90%86/">资料贴整理</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Automatic-Machine-Learning/" rel="tag">Automatic Machine Learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cousera/" rel="tag">Cousera</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Fusion/" rel="tag">Data Fusion</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Fishery-Forecasting/" rel="tag">Fishery Forecasting</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ocean-Color/" rel="tag">Ocean Color</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ocean-Optics/" rel="tag">Ocean Optics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oceanography/" rel="tag">Oceanography</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/R/" rel="tag">R</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Research/" rel="tag">Research</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Research-Basis/" rel="tag">Research Basis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Seminar/" rel="tag">Seminar</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Undergraduate-Thesis/" rel="tag">Undergraduate Thesis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bookreading/" rel="tag">bookreading</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/paper-reading/" rel="tag">paper reading</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BD%9C%E4%B8%9A/" rel="tag">作业</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A5%E9%97%A8/" rel="tag">入门</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" rel="tag">博客搭建</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%BF%E4%B9%89%E5%8A%A0%E6%80%A7%E6%A8%A1%E5%9E%8B/" rel="tag">广义加性模型</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%BB%E7%BB%93/" rel="tag">总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E6%9C%AC/" rel="tag">日本</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="tag">服务器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%97%E8%BD%A9%E7%94%B0/" rel="tag">林轩田</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%95%99%E5%AD%A6/" rel="tag">留学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90/" rel="tag">统计分析</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AD%A6%E9%86%92/" rel="tag">警醒</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9B%E9%98%B6/" rel="tag">进阶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E4%BE%BF%E5%86%99%E5%86%99/" rel="tag">随便写写</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Automatic-Machine-Learning/" style="font-size: 10px;">Automatic Machine Learning</a> <a href="/tags/Cousera/" style="font-size: 17.14px;">Cousera</a> <a href="/tags/Data-Fusion/" style="font-size: 10px;">Data Fusion</a> <a href="/tags/Fishery-Forecasting/" style="font-size: 10px;">Fishery Forecasting</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Ocean-Color/" style="font-size: 14.29px;">Ocean Color</a> <a href="/tags/Ocean-Optics/" style="font-size: 11.43px;">Ocean Optics</a> <a href="/tags/Oceanography/" style="font-size: 20px;">Oceanography</a> <a href="/tags/R/" style="font-size: 10px;">R</a> <a href="/tags/Research/" style="font-size: 17.14px;">Research</a> <a href="/tags/Research-Basis/" style="font-size: 12.86px;">Research Basis</a> <a href="/tags/Seminar/" style="font-size: 14.29px;">Seminar</a> <a href="/tags/Undergraduate-Thesis/" style="font-size: 10px;">Undergraduate Thesis</a> <a href="/tags/bookreading/" style="font-size: 15.71px;">bookreading</a> <a href="/tags/paper-reading/" style="font-size: 11.43px;">paper reading</a> <a href="/tags/python/" style="font-size: 11.43px;">python</a> <a href="/tags/%E4%BD%9C%E4%B8%9A/" style="font-size: 10px;">作业</a> <a href="/tags/%E5%85%A5%E9%97%A8/" style="font-size: 10px;">入门</a> <a href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" style="font-size: 12.86px;">博客搭建</a> <a href="/tags/%E5%B9%BF%E4%B9%89%E5%8A%A0%E6%80%A7%E6%A8%A1%E5%9E%8B/" style="font-size: 10px;">广义加性模型</a> <a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 12.86px;">总结</a> <a href="/tags/%E6%97%A5%E6%9C%AC/" style="font-size: 14.29px;">日本</a> <a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 10px;">服务器</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 18.57px;">机器学习</a> <a href="/tags/%E6%9E%97%E8%BD%A9%E7%94%B0/" style="font-size: 17.14px;">林轩田</a> <a href="/tags/%E7%95%99%E5%AD%A6/" style="font-size: 14.29px;">留学</a> <a href="/tags/%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90/" style="font-size: 10px;">统计分析</a> <a href="/tags/%E8%AD%A6%E9%86%92/" style="font-size: 10px;">警醒</a> <a href="/tags/%E8%BF%9B%E9%98%B6/" style="font-size: 10px;">进阶</a> <a href="/tags/%E9%9A%8F%E4%BE%BF%E5%86%99%E5%86%99/" style="font-size: 10px;">随便写写</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/08/07/lambda/">lambda</a>
          </li>
        
          <li>
            <a href="/2020/08/01/cartopy/">cartopy</a>
          </li>
        
          <li>
            <a href="/2020/07/19/book-reading-note-4/">book reading note 4</a>
          </li>
        
          <li>
            <a href="/2020/07/15/Data-fusion-series-note/">Data fusion series note 1</a>
          </li>
        
          <li>
            <a href="/2020/07/08/How-to-follow-the-nearst-research-in-oceanography/">How to follow the research progress in your field?</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>